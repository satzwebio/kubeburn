# Convert GiB to TB for plotting
prod_summary["used_tb"] = prod_summary["used_gib"] / 1024
prod_summary["capacity_tb"] = prod_summary["capacity_gib"] / 1024
nonprod_summary["used_tb"] = nonprod_summary["used_gib"] / 1024
nonprod_summary["capacity_tb"] = nonprod_summary["capacity_gib"] / 1024

# Plot Prod clusters in TB
plt.figure(figsize=(10,6))
x = range(len(prod_summary))
plt.bar(x, prod_summary["capacity_tb"], width=0.4, label="Capacity TB", color="lightgray")
plt.bar(x, prod_summary["used_tb"], width=0.4, label="Used TB", color="steelblue")
plt.xticks(x, prod_summary["Cluster"], rotation=45, ha="right")
plt.ylabel("Storage (TB)")
plt.title("Prod Clusters - Storage Usage vs Capacity (TB)")
plt.legend()
plt.tight_layout()
plt.savefig("prod_cluster_storage_tb.png")
plt.show()

# Plot Non-Prod clusters in TB
plt.figure(figsize=(10,6))
x = range(len(nonprod_summary))
plt.bar(x, nonprod_summary["capacity_tb"], width=0.4, label="Capacity TB", color="lightgray")
plt.bar(x, nonprod_summary["used_tb"], width=0.4, label="Used TB", color="steelblue")
plt.xticks(x, nonprod_summary["Cluster"], rotation=45, ha="right")
plt.ylabel("Storage (TB)")
plt.title("Non-Prod Clusters - Storage Usage vs Capacity (TB)")
plt.legend()
plt.tight_layout()
plt.savefig("nonprod_cluster_storage_tb.png")
plt.show()